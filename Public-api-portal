<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>API接口门户</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f4f4f4; }
    header { background: #333; color: white; padding: 1em; text-align: center; }
    nav { background: #eee; padding: 1em; text-align: center; }
    nav button { margin: 0.5em; padding: 0.5em 1em; border: none; background: #333; color: white; cursor: pointer; }
    .section { display: none; padding: 2em; }
    .section.active { display: block; }
    .api-box { background: white; padding: 1em; margin: 1em 0; border-radius: 5px; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
    input[type="text"] { width: 80%; padding: 0.5em; margin-top: 0.5em; }
  </style>
</head>
<body>
  <header>
    <h1>🌸 API接口门户</h1>
    <p>欢迎使用聚合API接口前端门户。</p>
  </header>
  <nav>
    <button onclick="switchSection('knowledge')">📚 知识</button>
    <button onclick="switchSection('entertainment')">🎬 娱乐</button>
    <button onclick="switchSection('music')">🎵 音乐</button>
    <button onclick="switchSection('weather')">🌦 天气</button>
    <button onclick="switchSection('image')">🖼 随机图片</button>
    <button onclick="switchSection('fun')">🧩 趣味</button>
  </nav>

  <!-- 知识板块 -->
  <div id="knowledge" class="section active">
    <div class="api-box">
      <h3>Wiki百科</h3>
      <p>支持 Wiki 百科查询。</p>
      <input type="text" id="wikiInput" placeholder="请输入查询词...">
      <button onclick="searchWikipedia()">查询</button>
      <div id="wikiResult"></div>
    </div>
  </div>

  <!-- 娱乐板块 -->
  <div id="entertainment" class="section">
    <div class="api-box">
      <h3>TVMaze 剧集查询</h3>
      <p>支持 TVMaze 剧集搜索。</p>
      <input type="text" id="tvInput" placeholder="请输入剧名...">
      <button onclick="searchTVMaze()">查询</button>
      <div id="tvResult"></div>
    </div>
  </div>

  <!-- 音乐板块 -->
  <div id="music" class="section">
    <div class="api-box">
      <h3>Lyrics.ovh 歌词查询</h3>
      <p>输入歌手与歌名获取歌词。</p>
      <input type="text" id="lyricsArtist" placeholder="歌手">
      <input type="text" id="lyricsTitle" placeholder="歌名">
      <button onclick="getLyrics()">查询</button>
      <div id="lyricsResult"></div>
    </div>
  </div>

  <!-- 天气板块 -->
  <div id="weather" class="section">
    <div class="api-box">
      <h3>IP 定位</h3>
      <p>获取你当前的地理位置。</p>
      <button onclick="getLocation()">查询</button>
      <div id="locationResult"></div>
    </div>
  </div>

  <!-- 随机图片板块 -->
  <div id="image" class="section">
    <div class="api-box">
      <h3>随机图片</h3>
      <p>Lorempicsum 随机图片。</p>
      <button onclick="getRandomImage()">获取</button>
      <div><img id="randomImage" style="max-width: 100%; margin-top: 1em;"></div>
    </div>
  </div>

  <!-- 趣味板块 -->
  <div id="fun" class="section">
    <div class="api-box">
      <h3>Bored API</h3>
      <p>获取一个无聊时可以做的活动。</p>
      <button onclick="getActivity()">查询</button>
      <div id="activityResult"></div>
    </div>
    <div class="api-box">
      <h3>Joke API</h3>
      <p>获取一个笑话。</p>
      <button onclick="getJoke()">查询</button>
      <div id="jokeResult"></div>
    </div>
  </div>

  <script>
    function switchSection(id) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    async function searchWikipedia() {
      const query = document.getElementById('wikiInput').value;
      const res = await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(query)}`);
      const data = await res.json();
      document.getElementById('wikiResult').innerHTML = data.extract ? `<p>${data.extract}</p>` : '<p>未找到相关内容</p>';
    }

    async function searchTVMaze() {
      const query = document.getElementById('tvInput').value;
      const res = await fetch(`https://api.tvmaze.com/search/shows?q=${encodeURIComponent(query)}`);
      const data = await res.json();
      document.getElementById('tvResult').innerHTML = data.length ? `<p>${data[0].show.name}：${data[0].show.summary}</p>` : '<p>未找到</p>';
    }

    async function getLyrics() {
      const artist = document.getElementById('lyricsArtist').value;
      const title = document.getElementById('lyricsTitle').value;
      const res = await fetch(`https://api.lyrics.ovh/v1/${encodeURIComponent(artist)}/${encodeURIComponent(title)}`);
      const data = await res.json();
      document.getElementById('lyricsResult').innerText = data.lyrics || '未找到歌词';
    }

    async function getLocation() {
      const res = await fetch('https://ipwho.is/');
      const data = await res.json();
      document.getElementById('locationResult').innerText = data.success ? `${data.country}, ${data.region}, ${data.city}` : '获取失败';
    }

    function getRandomImage() {
      document.getElementById('randomImage').src = `https://picsum.photos/600?random=${Date.now()}`;
    }

    async function getActivity() {
      const res = await fetch('https://www.boredapi.com/api/activity');
      const data = await res.json();
      document.getElementById('activityResult').innerText = data.activity;
    }

    async function getJoke() {
      const res = await fetch('https://v2.jokeapi.dev/joke/Any');
      const data = await res.json();
      document.getElementById('jokeResult').innerText = data.joke || `${data.setup} - ${data.delivery}`;
    }
  </script>
</body>
</html>
