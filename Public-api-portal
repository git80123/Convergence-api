<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>公共API聚合工具</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f4f4f4; }
    header { background: #333; color: white; padding: 1em; text-align: center; }
    nav { background: #eee; padding: 1em; text-align: center; }
    nav button { margin: 0.5em; padding: 0.5em 1em; border: none; background: #333; color: white; cursor: pointer; }
    .section { display: none; padding: 2em; }
    .section.active { display: block; }
    .api-box { background: white; padding: 1em; margin: 1em 0; border-radius: 5px; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
    input[type="text"] { width: 80%; padding: 0.5em; margin-top: 0.5em; }
  </style>
</head>
<body>
  <header>
    <h1>🎯 免费公共 API 工具箱</h1>
    <p>点击下方按钮以使用不同类别的免费 API</p>
  </header>
  <nav>
    <button onclick="switchSection('knowledge')">📚 知识类</button>
    <button onclick="switchSection('entertainment')">🎬 娱乐类</button>
    <button onclick="switchSection('music')">🎵 音乐类</button>
    <button onclick="switchSection('weather')">🌦️ 天气地理</button>
    <button onclick="switchSection('image')">🖼️ 图像类</button>
    <button onclick="switchSection('news')">📰 新闻类</button>
    <button onclick="switchSection('fun')">👨‍💻 趣味工具</button>
  </nav>

  <!-- 📚 知识类 -->
  <div id="knowledge" class="section active">
    <div class="api-box">
      <h3>Wikipedia 搜索</h3>
      <p>使用 Wikipedia API 获取百科文章摘要。</p>
      <input type="text" id="wikiInput" placeholder="输入搜索关键词...">
      <button onclick="searchWikipedia()">搜索</button>
      <div id="wikiResult"></div>
    </div>
  </div>

  <!-- 🎬 娱乐类 -->
  <div id="entertainment" class="section">
    <div class="api-box">
      <h3>TVMaze 剧集搜索</h3>
      <p>输入剧集名称以获取电视节目、演员等信息。</p>
      <input type="text" id="tvInput" placeholder="输入电视剧名...">
      <button onclick="searchTVMaze()">搜索</button>
      <div id="tvResult"></div>
    </div>
  </div>

  <!-- 🎵 音乐类 -->
  <div id="music" class="section">
    <div class="api-box">
      <h3>Lyrics.ovh 歌词搜索</h3>
      <p>输入歌名和歌手获取歌词。</p>
      <input type="text" id="lyricsArtist" placeholder="歌手">
      <input type="text" id="lyricsTitle" placeholder="歌名">
      <button onclick="getLyrics()">搜索歌词</button>
      <div id="lyricsResult"></div>
    </div>
  </div>

  <!-- 🌦️ 天气地理 -->
  <div id="weather" class="section">
    <div class="api-box">
      <h3>IP 定位</h3>
      <p>使用 ip-api 获取用户地理位置。</p>
      <button onclick="getLocation()">获取位置</button>
      <div id="locationResult"></div>
    </div>
  </div>

  <!-- 🖼️ 图像类 -->
  <div id="image" class="section">
    <div class="api-box">
      <h3>随机图片</h3>
      <p>Lorem Picsum 获取随机图像。</p>
      <button onclick="getRandomImage()">获取图片</button>
      <div><img id="randomImage" style="max-width: 100%; margin-top: 1em;"></div>
    </div>
  </div>

  <!-- 📰 新闻类 -->
  <div id="news" class="section">
    <div class="api-box">
      <h3>Currents API 新闻</h3>
      <p>获取最新新闻标题（示例，仅展示API结构）。</p>
      <p>⚠️ 该接口部署前端会受 CORS 限制，仅展示结构。</p>
    </div>
  </div>

  <!-- 👨‍💻 趣味工具 -->
  <div id="fun" class="section">
    <div class="api-box">
      <h3>Bored API</h3>
      <p>无聊？获取一个建议活动。</p>
      <button onclick="getActivity()">获取活动</button>
      <div id="activityResult"></div>
    </div>
    <div class="api-box">
      <h3>Joke API</h3>
      <p>获取一个笑话（英文）。</p>
      <button onclick="getJoke()">获取笑话</button>
      <div id="jokeResult"></div>
    </div>
  </div>

  <script>
    function switchSection(id) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    async function searchWikipedia() {
      const query = document.getElementById('wikiInput').value;
      const res = await fetch(`https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(query)}`);
      const data = await res.json();
      document.getElementById('wikiResult').innerHTML = data.extract ? `<p>${data.extract}</p>` : '<p>未找到内容</p>';
    }

    async function searchTVMaze() {
      const query = document.getElementById('tvInput').value;
      const res = await fetch(`https://api.tvmaze.com/search/shows?q=${encodeURIComponent(query)}`);
      const data = await res.json();
      document.getElementById('tvResult').innerHTML = data.length ? `<p>${data[0].show.name}：${data[0].show.summary}</p>` : '<p>未找到剧集</p>';
    }

    async function getLyrics() {
      const artist = document.getElementById('lyricsArtist').value;
      const title = document.getElementById('lyricsTitle').value;
      const res = await fetch(`https://api.lyrics.ovh/v1/${encodeURIComponent(artist)}/${encodeURIComponent(title)}`);
      const data = await res.json();
      document.getElementById('lyricsResult').innerText = data.lyrics || '未找到歌词';
    }

    async function getLocation() {
      const res = await fetch('http://ip-api.com/json/');
      const data = await res.json();
      document.getElementById('locationResult').innerText = `你在：${data.country}, ${data.regionName}, ${data.city}`;
    }

    async function getRandomImage() {
      document.getElementById('randomImage').src = `https://picsum.photos/600?random=${Date.now()}`;
    }

    async function getActivity() {
      const res = await fetch('https://www.boredapi.com/api/activity');
      const data = await res.json();
      document.getElementById('activityResult').innerText = data.activity;
    }

    async function getJoke() {
      const res = await fetch('https://v2.jokeapi.dev/joke/Any');
      const data = await res.json();
      document.getElementById('jokeResult').innerText = data.joke || `${data.setup} - ${data.delivery}`;
    }
  </script>
</body>
</html>
